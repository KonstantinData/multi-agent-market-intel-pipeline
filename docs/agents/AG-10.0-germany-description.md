# AG-10.0 Identity Legal Germany Agent

## Overview
Specialized agent for extracting legal identity information from German companies using Impressum data from company websites.

## Purpose
Extract comprehensive German legal identity information including complete company names, legal forms, and German address components from official Impressum pages.

## Key Functions
- **German Impressum Extraction**: Parse legal notices for official company information
- **Legal Form Recognition**: Identify German legal forms (GmbH, UG, AG, SE, KGaA, etc.)
- **Address Validation**: Extract and validate German address components
- **Entity Name Updates**: Update entity registry with complete legal names

## Input Requirements
- `company_name_canonical`: Normalized company name from AG-00
- `web_domain_normalized`: Normalized web domain from AG-00
- `meta_target_entity_stub`: Target entity information from AG-00

## Output Structure
```json
{
  "entities_delta": [
    {
      "entity_key": "domain:example-company.com",
      "entity_type": "target_company",
      "entity_name": "Example GmbH & Co. KGaA",
      "legal_form": "GmbH & Co. KGaA",
      "street_name": "Musterstraße",
      "house_number": "123a",
      "postal_code": "70173",
      "city": "Stuttgart",
      "state": "Baden-Württemberg",
      "country": "Germany",
      "country_code": "DE"
    }
  ],
  "findings": [
    {
      "legal_name": "Example GmbH & Co. KGaA",
      "legal_form": "GmbH & Co. KGaA",
      "address_complete": true
    }
  ]
}
```

## German Legal Forms Supported
- **GmbH**: Gesellschaft mit beschränkter Haftung
- **UG**: Unternehmergesellschaft (haftungsbeschränkt)
- **AG**: Aktiengesellschaft
- **SE**: Societas Europaea
- **KGaA**: Kommanditgesellschaft auf Aktien
- **GmbH & Co. KG**: Mixed legal form
- **e.K.**: Eingetragener Kaufmann
- **OHG**: Offene Handelsgesellschaft
- **e.V.**: Eingetragener Verein

## Address Format Validation
- **Street Name**: German street naming conventions
- **House Number**: Formats like 12, 12a, 12-14
- **Postal Code**: 5-digit German PLZ (e.g., 70173)
- **City**: German city names
- **State**: 16 German Bundesländer

## Data Sources
- Company Impressum pages
- Legal notices on official websites
- Contact/About pages with legal information

## Validation Rules
- Postal code must be 5-digit format
- House numbers must match German patterns
- Legal forms must be recognized German types
- Entity name updates preserve domain-based entity keys

## Error Handling
- Returns "n/v" for unavailable information
- Provides fallback data when OpenAI unavailable
- Validates all extracted data against German formats
- Logs extraction errors for debugging

## Integration
- **Activation**: Controlled by `region_germany` checkbox (default: enabled)
- **Execution Order**: Runs after AG-00 intake normalization
- **Registry Integration**: Updates entity registry with German legal data
- **Cross-Reference**: Compatible with cross-reference system

## Business Value
- **Legal Compliance**: Accurate German legal entity information
- **Address Verification**: Validated German business addresses
- **Entity Completeness**: Full legal names for downstream agents
- **Regional Focus**: Optimized for German Impressum requirements