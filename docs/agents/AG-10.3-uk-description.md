# AG-10.3 Identity Legal UK Agent

## Overview
Specialized agent for extracting legal identity information from UK companies using company registration data, legal notices, and official business information.

## Purpose
Extract comprehensive UK legal identity information including British legal forms, UK address formats with postcodes, and Companies House registration details.

## Key Functions
- **UK Legal Forms**: Identify British legal forms (Ltd, PLC, LLP, etc.)
- **Postcode Validation**: Validate UK postcode formats
- **Companies House Integration**: Extract registration information
- **Headquarters Detection**: Identify registered office addresses

## Input Requirements
- `company_name_canonical`: Normalized company name from AG-00
- `web_domain_normalized`: Normalized web domain from AG-00
- `meta_target_entity_stub`: Target entity information from AG-00

## Output Structure
```json
{
  "entities_delta": [
    {
      "entity_key": "domain:example-company.co.uk",
      "entity_type": "target_company",
      "entity_name": "Example Ltd",
      "legal_form": "Ltd",
      "street_name": "High Street",
      "house_number": "123",
      "postal_code": "SW1A 1AA",
      "city": "London",
      "state": "Greater London",
      "country": "United Kingdom",
      "country_code": "GB"
    }
  ],
  "findings": [
    {
      "legal_name": "Example Ltd",
      "legal_form": "Ltd",
      "country_detected": "GB"
    }
  ]
}
```

## UK Legal Forms Supported
- **Ltd**: Private Limited Company
- **Limited**: Private Limited Company (full form)
- **PLC**: Public Limited Company
- **Public Limited Company**: PLC (full form)
- **LLP**: Limited Liability Partnership
- **Limited Liability Partnership**: LLP (full form)
- **CIC**: Community Interest Company
- **Community Interest Company**: CIC (full form)
- **CIO**: Charitable Incorporated Organisation
- **LP**: Limited Partnership

## Address Format Validation
### UK Postcode Patterns
- **Standard Format**: SW1A 1AA, M1 1AA, B33 8TH
- **Validation Rules**: 
  - 1-2 letters + 1 number + optional letter
  - Space + 1 number + 2 letters
- **Examples**: 
  - London: SW1A 1AA, EC1A 1BB
  - Manchester: M1 1AA, M60 1NW
  - Birmingham: B1 1AA, B33 8TH

### Address Components
- **Street Names**: British street naming conventions
- **House Numbers**: Standard UK numbering
- **Cities**: UK cities and towns
- **Counties**: English, Scottish, Welsh, Northern Irish counties

## Data Sources
- Company legal notices and terms
- About/Contact pages with legal information
- Companies House registration data
- Headquarters and registered office information
- Corporate governance pages

## Validation Rules
- Country code must be "GB"
- Postcodes must match UK format patterns
- Legal forms must be recognized UK types
- Address components validated for UK format

## Error Handling
- Returns null if not UK company
- Provides "n/v" for unavailable information
- Validates UK-specific formats
- Fallback data when OpenAI unavailable

## Integration
- **Activation**: Controlled by `region_uk` checkbox (default: disabled)
- **Execution Order**: Runs after AG-00 and other regional agents
- **Registry Integration**: Updates entity registry with UK legal data
- **Country Detection**: Only processes GB companies

## Business Value
- **UK Market Coverage**: Comprehensive United Kingdom support
- **Legal Compliance**: Accurate UK legal entity information
- **Companies House Alignment**: Compatible with UK registration system
- **Brexit Considerations**: Post-Brexit UK legal form recognition