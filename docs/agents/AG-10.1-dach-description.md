# AG-10.1 Identity Legal DACH Agent

## Overview
Specialized agent for extracting legal identity information from Austrian and Swiss companies using Impressum data and legal notices from company websites.

## Purpose
Extract comprehensive DACH region legal identity information for Austria and Switzerland, including legal forms, address formats, and regulatory compliance data.

## Key Functions
- **Austrian Legal Forms**: Identify AT legal forms (GmbH, AG, e.U., OG, KG, etc.)
- **Swiss Legal Forms**: Identify CH legal forms (AG, GmbH, Einzelfirma, etc.)
- **DACH Address Formats**: Handle 4-digit postal codes and regional variations
- **Multi-Language Support**: Process German-language legal documents

## Input Requirements
- `company_name_canonical`: Normalized company name from AG-00
- `web_domain_normalized`: Normalized web domain from AG-00
- `meta_target_entity_stub`: Target entity information from AG-00

## Output Structure
```json
{
  "entities_delta": [
    {
      "entity_key": "domain:example-company.at",
      "entity_type": "target_company", 
      "entity_name": "Example GmbH",
      "legal_form": "GmbH",
      "street_name": "Musterstraße",
      "house_number": "12/3",
      "postal_code": "1010",
      "city": "Wien",
      "state": "Wien",
      "country": "Austria",
      "country_code": "AT"
    }
  ],
  "findings": [
    {
      "legal_name": "Example GmbH",
      "legal_form": "GmbH",
      "country_detected": "AT"
    }
  ]
}
```

## Austrian Legal Forms
- **GmbH**: Gesellschaft mit beschränkter Haftung
- **AG**: Aktiengesellschaft
- **e.U.**: Eingetragenes Unternehmen
- **OG**: Offene Gesellschaft
- **KG**: Kommanditgesellschaft
- **GmbH & Co KG**: Mixed legal form
- **Genossenschaft**: Cooperative
- **Verein**: Association
- **Stiftung**: Foundation

## Swiss Legal Forms
- **AG**: Aktiengesellschaft
- **GmbH**: Gesellschaft mit beschränkter Haftung
- **Einzelfirma**: Sole proprietorship
- **Kollektivgesellschaft**: General partnership
- **Kommanditgesellschaft**: Limited partnership
- **Genossenschaft**: Cooperative
- **Verein**: Association
- **Stiftung**: Foundation

## Address Format Validation
### Austria
- **Postal Code**: 4-digit format (e.g., 1010)
- **House Number**: Includes Top/Tür notation (e.g., 12/3)
- **States**: 9 Austrian Bundesländer

### Switzerland
- **Postal Code**: 4-digit format (e.g., 8001)
- **Street Names**: Often "Strasse" spelling
- **Cantons**: Swiss cantons (ZH, BE, SG, etc.)

## Data Sources
- Austrian/Swiss Impressum pages
- Legal notices and company information
- Official business registration data
- Headquarters information

## Validation Rules
- Country code must be AT or CH
- Postal codes must be 4-digit format
- Legal forms must match country-specific types
- House numbers support Austrian Top/Tür format

## Error Handling
- Returns null if not DACH region company
- Provides "n/v" for unavailable information
- Validates country-specific formats
- Fallback data when OpenAI unavailable

## Integration
- **Activation**: Controlled by `region_dach` checkbox (default: disabled)
- **Execution Order**: Runs after AG-00 and other regional agents
- **Registry Integration**: Updates entity registry with DACH legal data
- **Country Detection**: Only processes AT/CH companies

## Business Value
- **DACH Market Coverage**: Comprehensive Austria/Switzerland support
- **Legal Compliance**: Accurate DACH legal entity information
- **Address Verification**: Validated DACH business addresses
- **Regional Expertise**: Specialized DACH legal form recognition